{% extends 'base.html' %}

{% block extrascripts %}
    <script>
        $(document).ready(function(){
            var msgArea = $('#msgArea');
            var elementMessage = $('#message');
            var webSocket = new WebSocket('ws://' + window.location.host + '/chat/');
            webSocket.onmessage = function(message) {
                var data = JSON.parse(message.data);
                msgArea.append('<p><strong>'+ data.sender + '</strong>: ' + data.message + '</p>');
            };
            $('#btnSubmit').click(function(e) {
                webSocket.send(elementMessage.val());
            })
        })
    </script>
{% endblock %}

{% block content %}
<div id="msgArea"></div>

<div>
    <textarea name="message" id="message" cols="60" rows="10"></textarea>
</div>

<button id="btnSubmit">Submit</button>
{% endblock %}